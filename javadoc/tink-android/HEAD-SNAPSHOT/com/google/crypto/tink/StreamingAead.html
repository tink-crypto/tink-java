<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>StreamingAead</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StreamingAead";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StreamingAead.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../index.html?com/google/crypto/tink/StreamingAead.html" target="_top">Frames</a></li>
<li><a href="StreamingAead.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.google.crypto.tink</a></div>
<h2 title="Interface StreamingAead" class="title">Interface StreamingAead</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="subtle/AesCtrHmacStreaming.html" title="class in com.google.crypto.tink.subtle">AesCtrHmacStreaming</a></code>, <code><a href="subtle/AesGcmHkdfStreaming.html" title="class in com.google.crypto.tink.subtle">AesGcmHkdfStreaming</a></code>, <code><a href="streamingaead/internal/LegacyFullStreamingAead.html" title="class in com.google.crypto.tink.streamingaead.internal">LegacyFullStreamingAead</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">StreamingAead</span></pre>
<div class="block">An interface for streaming authenticated encryption with associated data.

 <p>Streaming encryption is typically used for encrypting large plaintexts such as large files.
 Tink may eventually contain multiple interfaces for streaming encryption depending on the
 supported properties. This interface supports a streaming interface for symmetric encryption with
 authentication. The underlying encryption modes are selected so that partial plaintext can be
 obtained fast by decrypting and authenticating just a part of the ciphertext.

 <h3>Security guarantees</h3>

 <p>Instances of StreamingAead must follow the nOAE definition as proposed in the paper "Online
 Authenticated-Encryption and its Nonce-Reuse Misuse-Resistance" by Hoang, Reyhanitabar, Rogaway
 and Viz√°r https://eprint.iacr.org/2015/189.pdf

 <h3>Restrictions</h3>

 <p>Encryption must be done in one session. There is no possibility to modify an existing
 ciphertext or append to it (other than reencrypt the whole file again). One reason for this
 restriction is the use of AES-GCM as one cipher to implement this interface. If single segments
 are modified then this is equivalent to reusing the same IV twice, but reusing an IV twice leaks
 an AES-GCM key. Another reason is that implementations of this interface have no protection
 against roll-back attacks: an attacker can always try to restore a previous version of the file
 without detection.

 <h3>Blocking vs non-blocking I/O</h3>

 <p>A channel can be in a blocking mode (i.e. always waits until the requested number of bytes
 have been processed) or non-blocking mode (i.e. I/O operation will never block and may transfer
 fewer bytes than were requested or possibly no bytes at all).

 <p>If the channel provided to the streaming encryption is in blocking mode then encryption and
 decryption have the same property. That is, encryption always processes all the plaintext passed
 in, and waits until complete segments have been written to the ciphertext channel (incomplete
 segment, if any, is buffered). Similarly, decryption blocks until sufficiently many bytes have
 been read from the ciphertext channel so that all the requested plaintext can be decrypted and
 authenticated, or until the end of the plaintext has been reached, or an IOException occurred.

 <p>If the channel provided to the streaming encryption is in non-blocking mode, then encryption
 and decryption are also non-blocking. Since encryption and decryption is done in segments it is
 possible that for example a call attempting to read() returns no plaintext at all even if partial
 ciphertext was read from the underlying channel.

 <h3>Sample encryption</h3>

 <pre><code>
 StreamingAead s = ...
 java.nio.channels.FileChannel ciphertextDestination =
     new FileOutputStream(ciphertextFile).getChannel();
 byte[] aad = ...
 WritableByteChannel encryptingChannel = s.newEncryptingChannel(ciphertextDestination, aad);
 while ( ... ) {
   int r = encryptingChannel.write(buffer);
   ...
 }
 encryptingChannel.close();
 </code></pre>

 <h3>Sample full decryption</h3>

 <pre><code>
 StreamingAead s = ...
 java.nio.channels.FileChannel ciphertextSource =
     new FileInputStream(ciphertextFile).getChannel();
 byte[] aad = ...
 ReadableByteChannel decryptingChannel = s.newDecryptingChannel(ciphertextSource, aad);
 int chunkSize = ...
 ByteBuffer buffer = ByteBuffer.allocate(chunkSize);
 do {
   buffer.clear();
   int cnt = decryptingChannel.read(buffer);
   if (cnt &gt; 0) {
     // Process cnt bytes of plaintext.
   } else if (read == -1) {
     // End of plaintext detected.
     break;
   } else if (read == 0) {
     // No ciphertext is available at the moment.
   }
 }
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.nio.channels.ReadableByteChannel</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newDecryptingChannel(java.nio.channels.ReadableByteChannel,byte%5B%5D)">newDecryptingChannel</a></span>&#8203;(java.nio.channels.ReadableByteChannel&nbsp;ciphertextSource,
                    byte[]&nbsp;associatedData)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newDecryptingStream(java.io.InputStream,byte%5B%5D)">newDecryptingStream</a></span>&#8203;(java.io.InputStream&nbsp;ciphertextSource,
                   byte[]&nbsp;associatedData)</code></th>
<td class="colLast">
<div class="block">Returns a wrapper around <code>ciphertextSource</code>, such that any read-operation
 via the wrapper results in AEAD-decryption of the underlying ciphertext,
 using <code>associatedData</code> as associated authenticated data.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.nio.channels.WritableByteChannel</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newEncryptingChannel(java.nio.channels.WritableByteChannel,byte%5B%5D)">newEncryptingChannel</a></span>&#8203;(java.nio.channels.WritableByteChannel&nbsp;ciphertextDestination,
                    byte[]&nbsp;associatedData)</code></th>
<td class="colLast">
<div class="block">Returns a WritableByteChannel for plaintext.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.io.OutputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newEncryptingStream(java.io.OutputStream,byte%5B%5D)">newEncryptingStream</a></span>&#8203;(java.io.OutputStream&nbsp;ciphertextDestination,
                   byte[]&nbsp;associatedData)</code></th>
<td class="colLast">
<div class="block">Returns a wrapper around <code>ciphertextDestination</code>, such that any write-operation via
 the wrapper results in AEAD-encryption of the written data, using <code>associatedData</code>
 as associated authenticated data.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.nio.channels.SeekableByteChannel</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newSeekableDecryptingChannel(java.nio.channels.SeekableByteChannel,byte%5B%5D)">newSeekableDecryptingChannel</a></span>&#8203;(java.nio.channels.SeekableByteChannel&nbsp;ciphertextSource,
                            byte[]&nbsp;associatedData)</code></th>
<td class="colLast">
<div class="block">Returns a SeekableByteChannel that allows to access the plaintext.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="newEncryptingChannel(java.nio.channels.WritableByteChannel,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newEncryptingChannel</h4>
<pre class="methodSignature">java.nio.channels.WritableByteChannel&nbsp;newEncryptingChannel&#8203;(java.nio.channels.WritableByteChannel&nbsp;ciphertextDestination,
                                                           byte[]&nbsp;associatedData)
                                                    throws java.security.GeneralSecurityException,
                                                           java.io.IOException</pre>
<div class="block">Returns a WritableByteChannel for plaintext.  Any data written to the returned
 channel will be encrypted and the resulting ciphertext written to the provided
 <code>ciphertextDestination</code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ciphertextDestination</code> - the channel to which the ciphertext is written.</dd>
<dd><code>associatedData</code> - data associated with the plaintext. This data is authenticated
     but not encrypted. It must be passed into the decryption.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.GeneralSecurityException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="newSeekableDecryptingChannel(java.nio.channels.SeekableByteChannel,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newSeekableDecryptingChannel</h4>
<pre class="methodSignature">java.nio.channels.SeekableByteChannel&nbsp;newSeekableDecryptingChannel&#8203;(java.nio.channels.SeekableByteChannel&nbsp;ciphertextSource,
                                                                   byte[]&nbsp;associatedData)
                                                            throws java.security.GeneralSecurityException,
                                                                   java.io.IOException</pre>
<div class="block">Returns a SeekableByteChannel that allows to access the plaintext.

 <p>This method does not work on Android Marshmallow (API level 23) or older because these
 Android versions don't have the java.nio.channels.SeekableByteChannel interface.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ciphertextSource</code> - the ciphertext</dd>
<dd><code>associatedData</code> - the data associated with the ciphertext.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>SeekableByteChannel</code> that allows random read access to the plaintext. The
     following methods of SeekableByteChannel are implemented:
     <ul>
       <li><code>long position()</code> Returns the channel's position in the plaintext.
       <li><code>SeekableByteChannel position(long newPosition)</code> Sets the channel's position.
           Setting the position to a value greater than the plaintext size is legal. A later
           attempt to read byte will immediately return an end-of-file indication.
       <li><code>int read(ByteBuffer dst)</code> Bytes are read starting at the channel's position,
           and then the position is updated with the number of bytes actually read. All bytes
           returned have been authenticated. If the end of the stream has been reached -1 is
           returned. A result of -1 is authenticated (e.g. by checking the MAC of the last
           ciphertext chunk.) A call to this function attempts to fill dst, but it may return
           fewer bytes than requested, e.g. if the underlying ciphertextSource does not provide
           the requested number of bytes or if the plaintext ended.
           <p>Throws <code>IOException</code> if a MAC verification failed. TODO: Should we extend
           the interface with read(ByteBuffer dst, long position) to avoid race conditions?
       <li><code>long size()</code> Returns the size of the plaintext. TODO: Decide whether the
           result should be authenticated)
       <li><code>SeekableByteChannel truncate(long size)</code> throws <code>NonWritableChannelException</code> because the channel is read-only.
       <li><code>int write(ByteBuffer src)</code> throws <code>NonWritableChannelException</code> because the channel is read-only.
       <li><code>close()</code> closes the channel
       <li><code>isOpen()</code>
     </ul></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.GeneralSecurityException</code> - if the header of the ciphertext is corrupt or if
     associatedData is not correct.</dd>
<dd><code>java.io.IOException</code> - if an IOException occurred while reading from ciphertextDestination.</dd>
</dl>
</li>
</ul>
<a id="newDecryptingChannel(java.nio.channels.ReadableByteChannel,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newDecryptingChannel</h4>
<pre class="methodSignature">java.nio.channels.ReadableByteChannel&nbsp;newDecryptingChannel&#8203;(java.nio.channels.ReadableByteChannel&nbsp;ciphertextSource,
                                                           byte[]&nbsp;associatedData)
                                                    throws java.security.GeneralSecurityException,
                                                           java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.GeneralSecurityException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="newEncryptingStream(java.io.OutputStream,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newEncryptingStream</h4>
<pre class="methodSignature">java.io.OutputStream&nbsp;newEncryptingStream&#8203;(java.io.OutputStream&nbsp;ciphertextDestination,
                                         byte[]&nbsp;associatedData)
                                  throws java.security.GeneralSecurityException,
                                         java.io.IOException</pre>
<div class="block">Returns a wrapper around <code>ciphertextDestination</code>, such that any write-operation via
 the wrapper results in AEAD-encryption of the written data, using <code>associatedData</code>
 as associated authenticated data. The associated data is not included in the ciphertext
 and has to be passed in as parameter for decryption.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.GeneralSecurityException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="newDecryptingStream(java.io.InputStream,byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>newDecryptingStream</h4>
<pre class="methodSignature">java.io.InputStream&nbsp;newDecryptingStream&#8203;(java.io.InputStream&nbsp;ciphertextSource,
                                        byte[]&nbsp;associatedData)
                                 throws java.security.GeneralSecurityException,
                                        java.io.IOException</pre>
<div class="block">Returns a wrapper around <code>ciphertextSource</code>, such that any read-operation
 via the wrapper results in AEAD-decryption of the underlying ciphertext,
 using <code>associatedData</code> as associated authenticated data.

 <p>The returned InputStream may support <code>mark()</code>/<code>reset()</code>,
    but does not have to do it -- <code>markSupported()</code> provides the corresponding info.

 <p>The returned InputStream supports <code>skip()</code>, yet possibly in an inefficient way,
    i.e. by reading a sequence of blocks until the desired position. If a more efficient
    <code>skip()</code>-functionality is needed, the Channel-based API can be used.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.GeneralSecurityException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StreamingAead.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../index.html?com/google/crypto/tink/StreamingAead.html" target="_top">Frames</a></li>
<li><a href="StreamingAead.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
